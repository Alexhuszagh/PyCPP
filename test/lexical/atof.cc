//  :copyright: (c) 2017 Alex Huszagh.
//  :license: MIT, see LICENSE.md for more details.

#include <pycpp/lexical/atof.h>
#include <gtest/gtest.h>

PYCPP_USING_NAMESPACE

// TESTS
// -----

TEST(atof32, base10)
{
    EXPECT_FLOAT_EQ(atof32("0", 10), 0);
    EXPECT_FLOAT_EQ(atof32("1", 10), 1);
    EXPECT_FLOAT_EQ(atof32("12", 10), 12);
    EXPECT_FLOAT_EQ(atof32("123", 10), 123);
    EXPECT_FLOAT_EQ(atof32("1234", 10), 1234);
    EXPECT_FLOAT_EQ(atof32("12345", 10), 12345);
    EXPECT_FLOAT_EQ(atof32("123456", 10), 123456);
    EXPECT_FLOAT_EQ(atof32("1234567", 10), 1234567);
    EXPECT_FLOAT_EQ(atof32("12345678", 10), 12345678);
    EXPECT_FLOAT_EQ(atof32("123456789", 10), 123456789);
    EXPECT_FLOAT_EQ(atof32("123456789.1", 10), 123456789.1);
    EXPECT_FLOAT_EQ(atof32("123456789.12", 10), 123456789.12);
    EXPECT_FLOAT_EQ(atof32("123456789.123", 10), 123456789.123);
    EXPECT_FLOAT_EQ(atof32("123456789.1234", 10), 123456789.1234);
    EXPECT_FLOAT_EQ(atof32("123456789.12345", 10), 123456789.12345);
}


TEST(atof64, base10)
{
    EXPECT_DOUBLE_EQ(atof64("0", 10), 0);
    EXPECT_DOUBLE_EQ(atof64("1", 10), 1);
    EXPECT_DOUBLE_EQ(atof64("12", 10), 12);
    EXPECT_DOUBLE_EQ(atof64("123", 10), 123);
    EXPECT_DOUBLE_EQ(atof64("1234", 10), 1234);
    EXPECT_DOUBLE_EQ(atof64("12345", 10), 12345);
    EXPECT_DOUBLE_EQ(atof64("123456", 10), 123456);
    EXPECT_DOUBLE_EQ(atof64("1234567", 10), 1234567);
    EXPECT_DOUBLE_EQ(atof64("12345678", 10), 12345678);
    EXPECT_DOUBLE_EQ(atof64("123456789", 10), 123456789);
    EXPECT_DOUBLE_EQ(atof64("123456789.1", 10), 123456789.1);
    EXPECT_DOUBLE_EQ(atof64("123456789.12", 10), 123456789.12);
    EXPECT_DOUBLE_EQ(atof64("123456789.123", 10), 123456789.123);
    EXPECT_DOUBLE_EQ(atof64("123456789.1234", 10), 123456789.1234);
    EXPECT_DOUBLE_EQ(atof64("123456789.12345", 10), 123456789.12345);

    exit(0);
}